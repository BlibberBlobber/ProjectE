function y = bandpas_filter(x)
%BANDPAS_FILTER Filters input x and returns output y.

% MATLAB Code
% Generated by MATLAB(R) 9.0 and the DSP System Toolbox 9.2.
% Generated on: 28-Mar-2017 13:16:38

%#codegen

% To generate C/C++ code from this function use the codegen command. Type
% 'help codegen' for more information.

persistent Hd;

if isempty(Hd)
    
    % The following code was used to design the filter coefficients:
    % % Equiripple Bandpass filter designed using the FIRPM function.
    %
    % % All frequency values are in Hz.
    % Fs = 8000;  % Sampling Frequency
    %
    % Fstop1 = 250;             % First Stopband Frequency
    % Fpass1 = 300;             % First Passband Frequency
    % Fpass2 = 3000;            % Second Passband Frequency
    % Fstop2 = 3050;            % Second Stopband Frequency
    % Dstop1 = 0.001;           % First Stopband Attenuation
    % Dpass  = 0.057501127785;  % Passband Ripple
    % Dstop2 = 0.001;           % Second Stopband Attenuation
    % dens   = 20;              % Density Factor
    %
    % % Calculate the order from the parameters using FIRPMORD.
    % [N, Fo, Ao, W] = firpmord([Fstop1 Fpass1 Fpass2 Fstop2]/(Fs/2), [0 1 ...
    %                           0], [Dstop1 Dpass Dstop2]);
    %
    % % Calculate the coefficients using the FIRPM function.
    % b  = firpm(N, Fo, Ao, W, {dens});
    
    Hd = dsp.FIRFilter( ...
        'Numerator', [-0.00781176276225611 -0.00931512880585115 ...
        0.0100052607586304 0.0156881739946446 -0.000376473179141989 ...
        0.000789471068303033 0.00418948400580205 -0.00454700598071816 ...
        -0.00126801233926003 -0.000440729617601677 -0.00530117092653752 ...
        -0.000677954582884164 -0.00206798553789789 -0.00360846096108604 ...
        0.000610763219487935 -0.00215515557023734 -0.000886393064640485 ...
        0.00146691923388889 -0.00138375320156698 0.00166252332415089 ...
        0.00142748996293775 -0.000112720028142257 0.00307186917346627 ...
        0.000676211183431494 0.001252869980375 0.00282278177034435 ...
        -0.000184121394125754 0.00208457864462053 0.00114373417337991 ...
        -0.000623278085552518 0.00183094488993681 -0.00102635693741241 ...
        -0.000537547282565945 0.000468042797280014 -0.00256363380435697 ...
        -0.000210251330464435 -0.00137268760192781 -0.00272461405122332 ...
        -1.11059554932687e-05 -0.00271405123145154 -0.00147103027497975 ...
        -0.00013101868009432 -0.00271472730428185 0.000523721512185716 ...
        -0.000457432964968673 -0.00114724561109616 0.00218467957693909 ...
        -0.000602592406417917 0.00134032244812063 0.00261393684135964 ...
        -0.000181449722366336 0.00342490790143348 0.00163824323922099 ...
        0.00079633309303504 0.00381430503161626 -9.94652783627948e-05 ...
        0.00176947915845741 0.00206665587629206 -0.00157912193641901 ...
        0.00193000055269581 -0.00104471680192948 -0.00203591734975291 ...
        0.000807551576356436 -0.00387735584691453 -0.00138070768325533 ...
        -0.0012862854130403 -0.00479807014111054 -0.000187080109290527 ...
        -0.00326336751945881 -0.00312319864328287 0.000722858883767744 ...
        -0.00377797194897779 0.000402079160969533 0.000857560219569706 ...
        -0.00206695592483917 0.00390625813956965 0.00039363299364363 ...
        0.00137293954561722 0.00541489872687602 -3.57055382506878e-06 ...
        0.00479608843020898 0.00401413438646663 0.000236556396245896 ...
        0.00607447795524952 0.000429022239026915 0.00103456823194861 ...
        0.00398005738111356 -0.00337143297253258 0.00160918841817518 ...
        -0.000863164375573019 -0.0052911954915696 0.00102166604871039 ...
        -0.00605383966163581 -0.00432949449492583 -0.000990425590684294 ...
        -0.00856511646636066 -0.00117672268382114 -0.00355897245603138 ...
        -0.00648965047108864 0.0023008960970092 -0.00486965961516998 ...
        -0.000393982021097506 0.00409824312488593 -0.00335098024672802 ...
        0.00675145920791549 0.00348285917924373 0.00111882206274487 ...
        0.0109243051190792 0.00124217300676328 0.00656072919092568 ...
        0.00937231620401479 -0.000879383756607337 0.00966400949425772 ...
        0.00237646353399716 -0.00150972681802371 0.00757589055636959 ...
        -0.00664767597374475 -0.000671961047134621 2.78962740247719e-06 ...
        -0.0127639665777206 0.000258806224515841 -0.00987465274502553 ...
        -0.0122704416755706 -0.000380313848217959 -0.0165174773080168 ...
        -0.00493821726214039 -0.00294295785322537 -0.0148036443224423 ...
        0.00563141214826363 -0.00565316795737701 -0.00336090734005155 ...
        0.0137503416752731 -0.00532843207969565 0.0136509939091845 ...
        0.0147624610991792 0.000443225045714672 0.0275386209366767 ...
        0.00775393729858611 0.0108492068995162 0.0288164059361188 ...
        -0.00377410751681545 0.0206445609902663 0.012122374829155 ...
        -0.0136693029145122 0.0213642349099781 -0.0200486409741756 ...
        -0.0164566634725984 0.00462190831985908 -0.0566746937652318 ...
        -0.0104185974763711 -0.0345220066125476 -0.0803896771344612 ...
        0.00133558137196694 -0.0987433584406268 -0.0660364137469621 ...
        0.0125061980531578 -0.227407654688362 0.151901957212908 ...
        0.683717977432408 0.151901957212908 -0.227407654688362 ...
        0.0125061980531578 -0.0660364137469621 -0.0987433584406268 ...
        0.00133558137196694 -0.0803896771344612 -0.0345220066125476 ...
        -0.0104185974763711 -0.0566746937652318 0.00462190831985908 ...
        -0.0164566634725984 -0.0200486409741756 0.0213642349099781 ...
        -0.0136693029145122 0.012122374829155 0.0206445609902663 ...
        -0.00377410751681545 0.0288164059361188 0.0108492068995162 ...
        0.00775393729858611 0.0275386209366767 0.000443225045714672 ...
        0.0147624610991792 0.0136509939091845 -0.00532843207969565 ...
        0.0137503416752731 -0.00336090734005155 -0.00565316795737701 ...
        0.00563141214826363 -0.0148036443224423 -0.00294295785322537 ...
        -0.00493821726214039 -0.0165174773080168 -0.000380313848217959 ...
        -0.0122704416755706 -0.00987465274502553 0.000258806224515841 ...
        -0.0127639665777206 2.78962740247719e-06 -0.000671961047134621 ...
        -0.00664767597374475 0.00757589055636959 -0.00150972681802371 ...
        0.00237646353399716 0.00966400949425772 -0.000879383756607337 ...
        0.00937231620401479 0.00656072919092568 0.00124217300676328 ...
        0.0109243051190792 0.00111882206274487 0.00348285917924373 ...
        0.00675145920791549 -0.00335098024672802 0.00409824312488593 ...
        -0.000393982021097506 -0.00486965961516998 0.0023008960970092 ...
        -0.00648965047108864 -0.00355897245603138 -0.00117672268382114 ...
        -0.00856511646636066 -0.000990425590684294 -0.00432949449492583 ...
        -0.00605383966163581 0.00102166604871039 -0.0052911954915696 ...
        -0.000863164375573019 0.00160918841817518 -0.00337143297253258 ...
        0.00398005738111356 0.00103456823194861 0.000429022239026915 ...
        0.00607447795524952 0.000236556396245896 0.00401413438646663 ...
        0.00479608843020898 -3.57055382506878e-06 0.00541489872687602 ...
        0.00137293954561722 0.00039363299364363 0.00390625813956965 ...
        -0.00206695592483917 0.000857560219569706 0.000402079160969533 ...
        -0.00377797194897779 0.000722858883767744 -0.00312319864328287 ...
        -0.00326336751945881 -0.000187080109290527 -0.00479807014111054 ...
        -0.0012862854130403 -0.00138070768325533 -0.00387735584691453 ...
        0.000807551576356436 -0.00203591734975291 -0.00104471680192948 ...
        0.00193000055269581 -0.00157912193641901 0.00206665587629206 ...
        0.00176947915845741 -9.94652783627948e-05 0.00381430503161626 ...
        0.00079633309303504 0.00163824323922099 0.00342490790143348 ...
        -0.000181449722366336 0.00261393684135964 0.00134032244812063 ...
        -0.000602592406417917 0.00218467957693909 -0.00114724561109616 ...
        -0.000457432964968673 0.000523721512185716 -0.00271472730428185 ...
        -0.00013101868009432 -0.00147103027497975 -0.00271405123145154 ...
        -1.11059554932687e-05 -0.00272461405122332 -0.00137268760192781 ...
        -0.000210251330464435 -0.00256363380435697 0.000468042797280014 ...
        -0.000537547282565945 -0.00102635693741241 0.00183094488993681 ...
        -0.000623278085552518 0.00114373417337991 0.00208457864462053 ...
        -0.000184121394125754 0.00282278177034435 0.001252869980375 ...
        0.000676211183431494 0.00307186917346627 -0.000112720028142257 ...
        0.00142748996293775 0.00166252332415089 -0.00138375320156698 ...
        0.00146691923388889 -0.000886393064640485 -0.00215515557023734 ...
        0.000610763219487935 -0.00360846096108604 -0.00206798553789789 ...
        -0.000677954582884164 -0.00530117092653752 -0.000440729617601677 ...
        -0.00126801233926003 -0.00454700598071816 0.00418948400580205 ...
        0.000789471068303033 -0.000376473179141989 0.0156881739946446 ...
        0.0100052607586304 -0.00931512880585115 -0.00781176276225611]);
end

y = step(Hd,x);


% [EOF]
